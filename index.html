<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HTML Email — Collaboration Proposal</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <style>
    :root { color-scheme: light; }
    /* Make iframe preview look like an email client canvas */
    .email-canvas { background: #f3f4f6; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
  </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-900">
  <header class="border-b bg-white">
    <div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between gap-4">
      <div>
        <h1 class="text-lg font-semibold">HTML Email Template — Collaboration Proposal</h1>
        <p class="text-sm text-gray-600">Generate a clean, email-friendly HTML proposal in English (video, static creatives, 3D product visuals).</p>
      </div>
      <div class="flex items-center gap-2">
        <button id="copySubject" class="rounded-lg border px-3 py-2 text-sm hover:bg-gray-50">Copy subject</button>
        <button id="copyHtml" class="rounded-lg bg-gray-900 px-3 py-2 text-sm text-white hover:bg-black">Copy HTML</button>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Controls -->
      <section class="rounded-2xl border bg-white p-5">
        <h2 class="text-base font-semibold">Personalize</h2>
        <p class="mt-1 text-sm text-gray-600">Optional fields. Leave blank to keep placeholders.</p>

        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
          <label class="block">
            <span class="text-sm font-medium">Recipient name</span>
            <input id="recipientName" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" placeholder="e.g., Alex" />
          </label>
          <label class="block">
            <span class="text-sm font-medium">Company / Brand</span>
            <input id="company" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" placeholder="e.g., Acme Studio" />
          </label>

          <label class="block">
            <span class="text-sm font-medium">Your name</span>
            <input id="yourName" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" placeholder="e.g., Maria Ivanova" />
          </label>
          <label class="block">
            <span class="text-sm font-medium">Role / Title</span>
            <input id="title" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" value="Art Designer" />
          </label>

          <label class="block md:col-span-2">
            <span class="text-sm font-medium">Portfolio link</span>
            <input id="portfolio" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" placeholder="https://your-portfolio.com" />
          </label>

          <label class="block">
            <span class="text-sm font-medium">Email</span>
            <input id="email" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" placeholder="you@email.com" />
          </label>
          <label class="block">
            <span class="text-sm font-medium">Telegram / Phone (optional)</span>
            <input id="messenger" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" placeholder="@handle or +1 ..." />
          </label>

          <label class="block">
            <span class="text-sm font-medium">Part-time price (from / month)</span>
            <input id="pricePart" type="number" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" value="1500" min="0" step="50" />
          </label>
          <label class="block">
            <span class="text-sm font-medium">Full-time price (from / month)</span>
            <input id="priceFull" type="number" class="mt-1 w-full rounded-lg border px-3 py-2 text-sm" value="3000" min="0" step="50" />
          </label>
        </div>

        <div class="mt-5 rounded-xl bg-gray-50 p-4 border">
          <div class="flex items-start justify-between gap-3">
            <div>
              <p class="text-sm font-semibold">Suggested subject</p>
              <p id="subjectLine" class="mt-1 text-sm text-gray-700"></p>
            </div>
            <button id="copySubject2" class="rounded-lg border bg-white px-3 py-2 text-sm hover:bg-gray-50">Copy</button>
          </div>
          <div class="mt-3">
            <p class="text-xs text-gray-600">Tip: keep it short and specific. You can A/B test subject lines.</p>
          </div>
        </div>

        <div class="mt-5">
          <p class="text-sm font-semibold">Raw HTML (copy/paste into your email tool)</p>
          <textarea id="htmlOutput" class="mono mt-2 h-64 w-full rounded-xl border bg-white px-3 py-2 text-xs leading-5" spellcheck="false"></textarea>
          <div class="mt-3 flex flex-wrap gap-2">
            <button id="copyHtml2" class="rounded-lg bg-gray-900 px-3 py-2 text-sm text-white hover:bg-black">Copy HTML</button>
            <button id="downloadHtml" class="rounded-lg border px-3 py-2 text-sm hover:bg-gray-50">Download .html</button>
            <a id="mailtoTest" class="rounded-lg border px-3 py-2 text-sm hover:bg-gray-50" href="#">Create mailto test</a>
          </div>
          <p id="toast" class="mt-2 text-sm text-green-700 hidden">Copied!</p>
        </div>
      </section>

      <!-- Preview -->
      <section class="rounded-2xl border bg-white p-5">
        <div class="flex items-center justify-between gap-3">
          <div>
            <h2 class="text-base font-semibold">Preview</h2>
            <p class="mt-1 text-sm text-gray-600">This preview uses an iframe. Your email platform may add its own wrappers.</p>
          </div>
          <div class="flex items-center gap-2">
            <label class="flex items-center gap-2 text-sm text-gray-700">
              <input id="darkPreview" type="checkbox" class="rounded border" />
              Dark canvas
            </label>
          </div>
        </div>

        <div id="previewWrap" class="mt-4 rounded-xl border overflow-hidden">
          <iframe id="preview" title="Email Preview" class="w-full h-[720px] email-canvas" sandbox="allow-same-origin"></iframe>
        </div>
      </section>
    </div>
  </main>

  <footer class="border-t bg-white">
    <div class="mx-auto max-w-6xl px-4 py-4 text-sm text-gray-600">
      Built as an email-friendly template (table layout + inline styles). Customize and paste into your ESP/CRM.
    </div>
  </footer>

  <script>
    const $ = (id) => document.getElementById(id);

    const fields = {
      recipientName: $('recipientName'),
      company: $('company'),
      yourName: $('yourName'),
      title: $('title'),
      portfolio: $('portfolio'),
      email: $('email'),
      messenger: $('messenger'),
      pricePart: $('pricePart'),
      priceFull: $('priceFull'),
      darkPreview: $('darkPreview')
    };

    function escapeHtml(s) {
      return String(s ?? '')
        .replaceAll('&', '&amp;')
        .replaceAll('<', '&lt;')
        .replaceAll('>', '&gt;')
        .replaceAll('"', '&quot;')
        .replaceAll("'", '&#39;');
    }

    function formatMoney(n) {
      const num = Number(n);
      if (!isFinite(num)) return '';
      return num.toLocaleString('en-US', { maximumFractionDigits: 0 });
    }

    function subjectLine() {
      const company = fields.company.value.trim();
      const base = 'Collaboration proposal: video, static creatives & 3D product visuals';
      return company ? `${base} for ${company}` : base;
    }

    function buildEmailHTML() {
      const recipientName = fields.recipientName.value.trim() || '{{RecipientName}}';
      const company = fields.company.value.trim() || '{{Company}}';
      const yourName = fields.yourName.value.trim() || '{{YourName}}';
      const title = fields.title.value.trim() || 'Art Designer';
      const portfolio = fields.portfolio.value.trim() || '{{PortfolioLink}}';
      const email = fields.email.value.trim() || '{{Email}}';
      const messenger = fields.messenger.value.trim() || '{{TelegramOrPhone}}';
      const pricePart = formatMoney(fields.pricePart.value || 1500);
      const priceFull = formatMoney(fields.priceFull.value || 3000);

      const safe = {
        recipientName: escapeHtml(recipientName),
        company: escapeHtml(company),
        yourName: escapeHtml(yourName),
        title: escapeHtml(title),
        portfolio: escapeHtml(portfolio),
        email: escapeHtml(email),
        messenger: escapeHtml(messenger),
        pricePart: escapeHtml(pricePart),
        priceFull: escapeHtml(priceFull)
      };

      // Email-friendly: table layout, inline CSS, no external fonts.
      return `<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="x-apple-disable-message-reformatting">
  <title>${escapeHtml(subjectLine())}</title>
</head>
<body style="margin:0;padding:0;background:#f3f4f6;">
  <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="background:#f3f4f6;">
    <tr>
      <td align="center" style="padding:24px 12px;">

        <table role="presentation" width="600" cellspacing="0" cellpadding="0" border="0" style="width:600px;max-width:600px;background:#ffffff;border-radius:16px;overflow:hidden;">
          <tr>
            <td style="padding:22px 22px 14px 22px;background:#111827;">
              <div style="font-family:Arial,Helvetica,sans-serif;color:#ffffff;font-size:18px;font-weight:bold;line-height:1.3;">
                Collaboration Proposal
              </div>
              <div style="font-family:Arial,Helvetica,sans-serif;color:#d1d5db;font-size:13px;line-height:1.5;margin-top:6px;">
                Video creatives • Static ads • 3D product visuals
              </div>
            </td>
          </tr>

          <tr>
            <td style="padding:22px;">
              <div style="font-family:Arial,Helvetica,sans-serif;color:#111827;font-size:14px;line-height:1.6;">
                <p style="margin:0 0 12px 0;">Hi ${safe.recipientName},</p>

                <p style="margin:0 0 12px 0;">My name is <strong>${safe.yourName}</strong>, and I’m an <strong>${safe.title}</strong>. I create high-performing <strong>video creatives</strong>, <strong>static ads</strong>, and <strong>3D product visuals</strong> for marketing teams and brands. I’d love to support <strong>${safe.company}</strong> with consistent creative production and testing.</p>

                <p style="margin:0 0 10px 0;"><strong>What I can deliver:</strong></p>
                <ul style="margin:0 0 12px 18px;padding:0;font-family:Arial,Helvetica,sans-serif;color:#111827;font-size:14px;line-height:1.6;">
                  <li style="margin:0 0 6px 0;"><strong>Video creatives</strong> (short ads, motion design, cutdowns, iterations for A/B tests)</li>
                  <li style="margin:0 0 6px 0;"><strong>Static creatives</strong> (banners, social posts, story formats, ad variants)</li>
                  <li style="margin:0 0 6px 0;"><strong>3D product visuals</strong> (packshots, hero images, turntables, lifestyle scenes)</li>
                </ul>

                <p style="margin:0 0 12px 0;">I work fast, keep files organized, and can adapt to your brand guidelines. If needed, I can also propose concepts and variations based on performance goals (CTR/CVR) and platform requirements.</p>

                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="background:#f9fafb;border:1px solid #e5e7eb;border-radius:12px;margin:14px 0 16px 0;">
                  <tr>
                    <td style="padding:14px 14px;">
                      <div style="font-family:Arial,Helvetica,sans-serif;color:#111827;font-size:14px;line-height:1.6;">
                        <div style="font-weight:bold;margin:0 0 8px 0;">Pricing (starting from)</div>
                        <div style="margin:0 0 4px 0;">• <strong>Part-time (≈ 50%)</strong>: from <strong>$${safe.pricePart}/month</strong></div>
                        <div style="margin:0 0 0 0;">• <strong>Full-time</strong>: from <strong>$${safe.priceFull}/month</strong></div>
                        <div style="margin-top:8px;color:#374151;font-size:12px;">Final scope depends on volume, complexity, and turnaround time.</div>
                      </div>
                    </td>
                  </tr>
                </table>

                <p style="margin:0 0 12px 0;">If you’re open to it, I can share a few tailored ideas for ${safe.company} and propose a simple monthly workflow (weekly batches, iterations, and reporting).</p>

                <p style="margin:0 0 14px 0;"><strong>Portfolio:</strong> <a href="${safe.portfolio}" style="color:#2563eb;text-decoration:underline;">${safe.portfolio}</a></p>

                <p style="margin:0 0 0 0;">Would you be available for a quick 15-minute call this week to discuss your current creative needs?</p>
              </div>

              <div style="height:16px;line-height:16px;font-size:16px;">&nbsp;</div>

              <div style="font-family:Arial,Helvetica,sans-serif;color:#111827;font-size:14px;line-height:1.6;">
                <div style="font-weight:bold;">Best regards,</div>
                <div>${safe.yourName}</div>
                <div style="color:#374151;">${safe.title}</div>
                <div style="margin-top:8px;">
                  <div><strong>Email:</strong> <a href="mailto:${safe.email}" style="color:#2563eb;text-decoration:underline;">${safe.email}</a></div>
                  <div><strong>Telegram/Phone:</strong> ${safe.messenger}</div>
                </div>
              </div>
            </td>
          </tr>

          <tr>
            <td style="padding:14px 22px 22px 22px;background:#ffffff;">
              <div style="font-family:Arial,Helvetica,sans-serif;color:#6b7280;font-size:12px;line-height:1.5;">
                You’re receiving this email as a professional collaboration proposal. If it’s not relevant, just let me know and I won’t follow up.
              </div>
            </td>
          </tr>
        </table>

      </td>
    </tr>
  </table>
</body>
</html>`;
    }

    function update() {
      $('subjectLine').textContent = subjectLine();
      const html = buildEmailHTML();
      $('htmlOutput').value = html;
      $('preview').srcdoc = html;

      const dark = fields.darkPreview.checked;
      $('preview').classList.toggle('email-canvas', !dark);
      $('preview').style.background = dark ? '#0b1020' : '#f3f4f6';

      // Update mailto test (plain text body; HTML not supported reliably in mailto)
      const subj = subjectLine();
      const bodyText = `Hi ${fields.recipientName.value.trim() || 'there'},\n\n` +
        `My name is ${fields.yourName.value.trim() || '[[Your Name]]'} — ${fields.title.value.trim() || 'Art Designer'}. ` +
        `I create video creatives, static ads, and 3D product visuals.\n\n` +
        `Pricing (starting from):\n` +
        `- Part-time (≈ 50%): $${formatMoney(fields.pricePart.value || 1500)}/month\n` +
        `- Full-time: $${formatMoney(fields.priceFull.value || 3000)}/month\n\n` +
        `Portfolio: ${fields.portfolio.value.trim() || '[[link]]'}\n\n` +
        `Would you be available for a quick 15-minute call this week?\n\n` +
        `Best regards,\n${fields.yourName.value.trim() || '[[Your Name]]'}\n` +
        `${fields.email.value.trim() || '[[email]]'}`;
      const mailto = `mailto:?subject=${encodeURIComponent(subj)}&body=${encodeURIComponent(bodyText)}`;
      $('mailtoTest').setAttribute('href', mailto);
    }

    async function copyText(text) {
      try {
        await navigator.clipboard.writeText(text);
        const t = $('toast');
        t.classList.remove('hidden');
        clearTimeout(copyText._timer);
        copyText._timer = setTimeout(() => t.classList.add('hidden'), 1200);
      } catch {
        // Fallback
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        const t = $('toast');
        t.classList.remove('hidden');
        clearTimeout(copyText._timer);
        copyText._timer = setTimeout(() => t.classList.add('hidden'), 1200);
      }
    }

    function download(filename, content) {
      const blob = new Blob([content], { type: 'text/html;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(() => URL.revokeObjectURL(url), 1000);
    }

    // Wire events
    for (const el of Object.values(fields)) {
      el.addEventListener('input', update);
      el.addEventListener('change', update);
    }

    $('copyHtml').addEventListener('click', () => copyText($('htmlOutput').value));
    $('copyHtml2').addEventListener('click', () => copyText($('htmlOutput').value));
    $('copySubject').addEventListener('click', () => copyText(subjectLine()));
    $('copySubject2').addEventListener('click', () => copyText(subjectLine()));

    $('downloadHtml').addEventListener('click', () => {
      const stamp = new Date().toISOString().slice(0, 10);
      download(`collaboration-email-${stamp}.html`, $('htmlOutput').value);
    });

    // Defaults for nicer first render
    fields.yourName.value = fields.yourName.value || 'Your Name';
    fields.company.value = fields.company.value || '';
    fields.portfolio.value = fields.portfolio.value || '';
    update();
  </script>
</body>
</html>
